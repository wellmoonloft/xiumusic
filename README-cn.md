
# XiuMusic
![](https://img.shields.io/badge/Toolkit-Flutter-blue.svg)  ![](https://img.shields.io/badge/Language-Dart-orange.svg)  ![](https://img.shields.io/badge/license-MIT-green)  ![](https://img.shields.io/badge/Process-Developing-blueviolet.svg)

 åŸºäºæ’­æ”¾ä¸ªäººNASéŸ³ä¹çš„æ’­æ”¾å™¨ï¼ŒNavidromeæœåŠ¡å™¨å¼€å‘ï¼Œç†è®ºä¸Šæ”¯æŒSubsonicæœåŠ¡å™¨

 ğŸ‡¨ğŸ‡³[ç®€ä½“ä¸­æ–‡](README-cn.md) | ğŸ‡ºğŸ‡¸[English](README.md)

## ç®€ä»‹

**Xiu**æ˜¯æˆ‘è¿‘æœŸç»å¸¸çœ‹çš„[ä¸€ä¸ªéŸ³ä¹ä¸»æ’­](https://www.douyu.com/7884070)ï¼Œå¥¹åå­—é‡Œæœ‰ä¸ªXiuå­—ï¼Œæ‰€ä»¥å°±å«**XiuMusic**äº†ã€‚

æœ€è¿‘åœ¨NASä¸Šæ­äº†å¥½å¤šä¸œè¥¿ï¼Œå…¶ä¸­éŸ³ä¹çš„æœåŠ¡å™¨ç”¨äº†Navidromeï¼Œå®¢æˆ·ç«¯é€‰äº†å¾ˆå¤šï¼Œä½†åªæœ‰[Sonixd](https://github.com/jeffvli/sonixd)æ„Ÿè§‰ä¸é”™ï¼Œä½†æ˜¯æ²¡æœ‰ç§»åŠ¨ç«¯ï¼Œè€Œä¸”æœ‰ä¸ªä¸–çºªéš¾é¢˜ï¼Œä¸æ”¯æŒæ­Œè¯ï¼ˆ[issues](https://github.com/jeffvli/sonixd/issues/332)ä¸Šä½œè€…è¯´è¦æ¥ä¸€ä¸ªå¤§è®¡åˆ’é£è·ƒåˆ°v1.0ï¼Œå¹¶è§£å†³æ­Œè¯çš„é—®é¢˜ï¼Œè€Œä¸”ç›®å‰çš„ä¸€äº›repoè¯´æ”¯æŒäº†ï¼Œä½†æ˜¯æˆ‘å°è¯•å¥½å‡ æ¬¡éƒ½ä¸æˆåŠŸï¼‰

å› æ­¤æˆ‘éœ€è¦ä¸€ä¸ªè¿™æ ·çš„APPï¼š
1. æ”¯æŒæ­Œè¯
2. æ”¯æŒæ¨¡ç³ŠæŸ¥æ‰¾ï¼ˆç®€ä½“ã€ç¹ä½“ï¼Œè¿™æ˜¯å¾ˆå¤§çš„é—®é¢˜ï¼Œæ¯”å¦‚ä½ æœå‘¨æ°ä¼¦å’Œå‘¨æ°å€«ï¼‰
3. ç®€æ´ï¼ˆå¬æ­Œå°±æ˜¯å¬æ­Œï¼‰
4. æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯UIç»Ÿä¸€é£æ ¼

æœ‰äº†è¿™å››ä¸ªéœ€æ±‚ï¼Œæˆ‘å†³å®šè‡ªå·±æ’¸ä¸€ä¸ªAPPç»™è‡ªå·±ç”¨

è¿™æ˜¯åœ¨[Navidrome](https://www.navidrome.org/)çš„æœåŠ¡å™¨ç¯å¢ƒä¸ŠåŸºäº[Subsonicçš„API](http://www.subsonic.org/pages/api.jsp)çš„æ¥å£å¼€å‘è°ƒè¯•çš„ï¼Œæ‰€ä»¥ç†è®ºä¸Šæ”¯æŒSubsonicã€Navidromeå’ŒAirsonicï¼Œæƒ³ç©çš„éƒ½å¯ä»¥ä¸‹è½½äº†è¯•ä¸€è¯•ï¼Œå¦‚æœæ¥å£ç›¸åŒé‚£åº”è¯¥é—®é¢˜ä¸å¤§ï¼ˆç»å¤§éƒ¨ä»½çš„DIOè¯·æ±‚æ²¡æœ‰æŠ›é”™ï¼Œå»ºè®®ç½‘ç»œç¯å¢ƒå¥½çš„æ—¶å€™é£Ÿç”¨ï¼Œç­‰åšå®Œäº†å†å›å»è¡¥ç”¨æˆ·äº¤äº’ï¼‰

æ³¨æ„ï¼ï¼ï¼ä¸‹è½½äº†æ­Œè¯æ˜¯ä¿å­˜åœ¨APPæ–‡æ¡£çš„æ•°æ®åº“é‡Œçš„ï¼Œç›®å‰æ²¡æœ‰åšå¯¼å‡ºåŠŸèƒ½ï¼Œå°‘ç©ä¸€ç‚¹ï¼Œçœçš„æ­Œè¯æ‰¾ä¸å‡ºæ¥æ€ªæˆ‘

[macOSçš„v0.4ç‰ˆæœ¬å·²ç»ä¸Šæ¶äº†ï¼Œå¯ä»¥ç›´æ¥ç”¨](https://apps.apple.com/us/app/xiu-music/id1667473545)
è¿™ä¸ªç‰ˆæœ¬æœ‰ä¸¤ä¸ªé—®é¢˜:
1. åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŠŠUIé”ä½äº†ï¼Œå¦‚æœä½ çš„æ­Œæ›²è¶…è¿‡5000é¦–ï¼Œå¯èƒ½ä¼šé”æ­»
2. åˆ¤æ–­åˆ·æ–°æ˜¯æ ¹æ®getScanStatusæ¥å£çš„ä¸¤ä¸ªæ•°æ®åˆ¤æ–­ï¼Œä½†æ˜¯åˆšåˆšå¾—çŸ¥å…¶ä¸­ä¸€ä¸ªæ•°æ®æ˜¯Navidromeç‹¬æœ‰çš„ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦æ‰‹åŠ¨åˆ·æ–°
v0.4.1è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³é¢‘ç¹çš„æäº¤appstore
è¯·æ³¨æ„v0.5.0å¼€å§‹æ›´æ–°äº†è¡¨ç»“æ„ï¼Œè¯·åˆ é™¤appé‡æ–°å®‰è£…ï¼Œä¸è¦æ›´æ–°æˆ–è€…è¦†ç›–


![](https://s2.loli.net/2023/01/10/3Wj8w7QfbZJ9N4y.jpg)

é”å±æ’­æ”¾

![](https://s2.loli.net/2023/01/23/pWL4ia9mZCxuynG.jpg)

## Todo List 

### é¡µé¢  
  
- [ ] é…ç½®  
  - [x] æœåŠ¡å™¨é…ç½®ï¼šæµ‹è¯•ã€è¿æ¥ã€ä¿å­˜æœåŠ¡å™¨åŠè´¦å·ä¿¡æ¯
  - [ ] ä¸ªæ€§åŒ–ï¼šæ²¡æƒ³å¥½åšä¸åš
  - [x] å¤šè¯­è¨€ï¼šåšäº†è‹±æ–‡ã€ä¸­æ–‡ã€ç®€ä½“ä¸­æ–‡å’Œç¹ä½“ä¸­æ–‡ï¼Œæ ¹æ®ç»ˆç«¯é…ç½®æ¥åŠ è½½ï¼Œä¿å­˜åæ ¹æ®ä¿å­˜çš„åŠ è½½

### åŸºç¡€  

- [ ] ç”¨æˆ·ä½“éªŒ  ç†è®ºæ”¯æŒIOS/å®‰å“/macOS/Windows/Linux
  - [x] è°ƒè¯•è¿‡çš„: macOS iOS å®‰å“
  - [ ] è¿˜æ²¡è°ƒè¯•çš„: Windows/Linux ç†è®ºä¸Šåº”è¯¥æ²¡é—®é¢˜
  - [ ] åå°æŠ›é”™åˆ°å‰å°
  - [ ] æ¡Œé¢å¿«æ·é”®  
  - [ ] åˆ†é¡µ    



![](https://s2.loli.net/2023/01/12/vMEGWZdzIblT9qx.jpg)

![](https://s2.loli.net/2023/01/10/BCPjVHlazr2mK1R.jpg)

------------------------------

## å¿«é€Ÿå¼€å§‹

1. Clone é¡¹ç›®

2. åˆ é™¤iosã€macosé‡æ–°ç”Ÿæˆ

3. åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ `flutter create . `

4. åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œ `flutter packages get`

#### MacOS/IOS

ä¸‹åˆ—æ–‡ä»¶æ·»åŠ 
DebugProfile.entitlements
Release.entitlements

    <key>com.apple.security.network.client</key>
    <true/>

å¼€å¯é”å±æ’­æ”¾
#### IOS
Info.plist
```
<key>UIBackgroundModes</key>
	<array>
		<string>audio</string>
	</array>
```
AndroidManifest.xml

```
<manifest xmlns:tools="http://schemas.android.com/tools" ...>
  <!-- ADD THESE TWO PERMISSIONS -->
  <uses-permission android:name="android.permission.WAKE_LOCK"/>
  <uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>
  
  <application ...>
    
    ...
    
    <!-- EDIT THE android:name ATTRIBUTE IN YOUR EXISTING "ACTIVITY" ELEMENT -->
    <activity android:name="com.ryanheise.audioservice.AudioServiceActivity" ...>
      ...
    </activity>
    
    <!-- ADD THIS "SERVICE" element -->
    <service android:name="com.ryanheise.audioservice.AudioService"
        android:foregroundServiceType="mediaPlayback"
        android:exported="true" tools:ignore="Instantiatable">
      <intent-filter>
        <action android:name="android.media.browse.MediaBrowserService" />
      </intent-filter>
    </service>

    <!-- ADD THIS "RECEIVER" element -->
    <receiver android:name="com.ryanheise.audioservice.MediaButtonReceiver"
        android:exported="true" tools:ignore="Instantiatable">
      <intent-filter>
        <action android:name="android.intent.action.MEDIA_BUTTON" />
      </intent-filter>
    </receiver> 
  </application>
</manifest>
```

#### ä½¿ç”¨æ­Œè¯æœç´¢åŠŸèƒ½

éœ€è¦è®¾ç½®ç½‘æ˜“äº‘çš„apiï¼Œæ ¹æ®è¿™é‡Œè®¾ç½®[NeteaseCloudMusicApi](https://github.com/Binaryify/NeteaseCloudMusicApi)çš„è¯´æ˜åœ¨[vercel](https://vercel.com/)ä¸Šé…ç½®ä¸€ä¸ªä¹‹åï¼ŒæŠŠapiçš„åŸŸåä¿å­˜åœ¨è®¾ç½®çš„æ­Œè¯æœåŠ¡å™¨é‡Œé¢å°±å¯ä»¥ä½¿ç”¨äº†ã€‚

![WechatIMG673](https://s2.loli.net/2023/01/18/GPbWiBRjT3LHl8K.png)

## ä¾èµ–

- [sqflite: ^2.2.25](https://pub.flutter-io.cn/packages/sqflite) æ•°æ®æŒä¹…åŒ–ã€‚
- [path: ^1.8.2 ](https://pub.flutter-io.cn/packages/path) ç»™æ•°æ®åº“æ‰¾ä½ç½®çš„ï¼Œä¹Ÿå¯ä»¥ç”¨äºå›¾ç‰‡ç¼“å­˜ï¼Œä½†æ˜¯è¿˜æ˜¯base64é¦™å§ã€‚
- [just_audio: ^0.9.31](https://pub.dev/packages/just_audio) å¥½è¯„åº¦99%çš„éŸ³ä¹æ’­æ”¾å·¥å…·ã€‚
- [just_audio_background: ^0.0.1-beta.9](https://pub.dev/packages/just_audio_background) æ”¯æŒç§»åŠ¨ç«¯åå°æ’­æ”¾åŠé”å±æ§åˆ¶ã€‚  
- [dio: ^4.0.6](https://pub.dev/packages/dio) åŠå…¶ç®€å•çš„Restfulè¯·æ±‚å·¥å…·ã€‚
- [crypto: ^3.0.2](https://pub.dev/packages/crypto) MD5ç­‰åŠ å¯†ç”¨çš„ã€‚
- [window_manager: ^0.2.8](https://pub.dev/packages/crypto) é™åˆ¶çª—ä½“æœ€å°åŒ–ä»¥åŠéšè—titileæ ç”¨çš„ã€‚
- [flutter_staggered_grid_view: ^0.6.2](https://pub.dev/packages/flutter_staggered_grid_view) å®ç°ç€‘å¸ƒæµï¼Œä½¿ç”¨ç®€å•ã€‚
- [cached_network_image: ^3.2.3](https://pub.dev/packages/cached_network_image) å®ç°å›¾ç‰‡ç¼“å­˜ï¼Œä½¿ç”¨ç®€å•ã€‚
- [flutter_lyric: ^2.0.4+6](https://pub.dev/packages/flutter_lyric) æ•´ä¸ªpubä¸Šé¢ç‹¬ä¸€ä»½ï¼Œä½¿ç”¨ç®€å•ã€‚



v0.5.0
- å»æ‰å¤§éƒ¨åˆ†æ•°æ®åº“ï¼Œåªä¿ç•™æœåŠ¡å™¨ä¿¡æ¯
- ä¿®æ”¹è¿›åº¦æ¡å¤§å°ï¼Œä¸ç„¶æ‰‹æœºä¸Šç‰¹åˆ«ä¸å¥½ç‚¹
- å¢åŠ æ­Œæ›²åç¼€åï¼Œæ’é™¤æ‰ape
- å¢åŠ æµæ´¾
